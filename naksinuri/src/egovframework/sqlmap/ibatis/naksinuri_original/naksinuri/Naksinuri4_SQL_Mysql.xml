<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Naksi3">

	<typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias alias="naksinuriVO" type="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriVO"/>	
	<typeAlias alias="NaksinuriSanupVO" type="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO"/>	
	<typeAlias alias="naksinurifileVO" type="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriFileVO"/>
	<typeAlias alias="eventVO" type="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriEventVO"/>
	<typeAlias alias="naksinurizisikVO" type="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriZisikinVO"/>
	<typeAlias alias="fishesVO" type="egovframework.naksinuri_original.let.naksinuri.service.FishesVO"/>
	<typeAlias alias="EduCenterBoardVO" type="egovframework.educenter.board.service.EduCenterBoardVO"/>
	<typeAlias alias="NaksinuriPolicyVO" type="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriPolicyVO"/>
	

	<select id="getmobile_prcnt" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS LIKE '%Mobile_%' AND date_time between SYSDATE()-INTERVAL 7 DAY AND SYSDATE())/COUNT(STATISTIC_OS))*100,'1','4')as mobile_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between SYSDATE()-INTERVAL 7 DAY AND SYSDATE() 
		 ]]>
	</select>
	
	<select id="getpc_prcnt" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS NOT LIKE '%Mobile_%' AND date_time between SYSDATE()-INTERVAL 7 DAY AND SYSDATE())/COUNT(STATISTIC_OS))*100,'1','4')as pc_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between SYSDATE()-INTERVAL 7 DAY AND SYSDATE() 
		 ]]>
	</select>
	
	<select id="getmobile_prcntday" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS LIKE '%Mobile_%' AND date_time between SYSDATE()-INTERVAL 1 DAY AND SYSDATE())/COUNT(STATISTIC_OS))*100,'1','4')as mobile_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between SYSDATE()-INTERVAL 1 DAY AND SYSDATE() 
		 ]]>
	</select>
	
	
	<select id="getpc_prcntday" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS NOT LIKE '%Mobile_%' AND date_time between SYSDATE()-INTERVAL 1 DAY AND SYSDATE())/COUNT(STATISTIC_OS))*100,'1','4')as pc_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between SYSDATE()-INTERVAL 1 DAY AND SYSDATE() 
		 ]]>
	</select>
		
		
	<select id="getmobile_prcntmonth" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS LIKE '%Mobile_%' AND date_time between SYSDATE()-INTERVAL 1 MONTH AND SYSDATE())/COUNT(STATISTIC_OS))*100,'1','4')as mobile_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between SYSDATE()-INTERVAL 1 MONTH AND SYSDATE() 
		 ]]>
	</select>
	
	
	<select id="getpc_prcntmonth" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS NOT LIKE '%Mobile_%' AND date_time between SYSDATE()-INTERVAL 1 MONTH AND SYSDATE())/COUNT(STATISTIC_OS))*100,'1','4')as pc_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between SYSDATE()-INTERVAL 1 MONTH AND SYSDATE() 
		 ]]>
	</select>
		
	<select id="getpc_prcntself" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS NOT LIKE '%Mobile_%' AND date_time between #start_dt# AND #end_dt#)/COUNT(STATISTIC_OS))*100,'1','4')as pc_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between #start_dt# AND #end_dt#
		 ]]>
	</select>
	
	<select id="getmobile_prcntself" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<![CDATA[
		  SELECT statistic_os,SUBSTR(((select COUNT(STATISTIC_OS) FROM NAKSINURI_STATISTICS
		  WHERE STATISTIC_OS LIKE '%Mobile%' AND date_time between #start_dt# AND #end_dt#)/COUNT(STATISTIC_OS))*100,'1','4')as mobile_prcnt FROM NAKSINURI_STATISTICS 
  		  WHERE date_time between #start_dt# AND #end_dt# 
		 ]]>
	</select>	
	
	
	
	
	<select id="getmost_pc" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
	
		  SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_pc
		  WHERE STATISTIC_OS NOT LIKE '%Mobile%' AND DATE_TIME BETWEEN SYSDATE()-INTERVAL 7 DAY AND SYSDATE()
          GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
		
	</select>
	
	<select id="getmost_mobile" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">

		SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_mobile
		WHERE STATISTIC_OS LIKE '%Mobile%'
     	AND DATE_TIME BETWEEN SYSDATE()-INTERVAL 7 DAY AND SYSDATE() 
    	GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
	
	</select>
	
	<select id="getmost_pcmonth" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
	
		  SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_pc
		  WHERE STATISTIC_OS NOT LIKE '%Mobile%'
          AND DATE_TIME BETWEEN SYSDATE()-INTERVAL 1 MONTH AND SYSDATE()
          GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
	
	</select>
	
	<select id="getmost_mobilemonth" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">

		SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_mobile
		WHERE STATISTIC_OS LIKE '%Mobile%'
     	AND DATE_TIME BETWEEN SYSDATE()-INTERVAL 1 MONTH AND SYSDATE()
    	GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
	
	</select>
	
	
	<select id="getmost_pcself" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		
		  SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_pc
		  WHERE STATISTIC_OS NOT LIKE '%Mobile%'
          AND DATE_TIME BETWEEN #start_dt# AND #end_dt#
          GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
		
	</select>
	
	<select id="getmost_mobileself" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">

		SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_mobile
		WHERE STATISTIC_OS LIKE '%Mobile%'
     	AND DATE_TIME BETWEEN #start_dt# AND #end_dt#
    	GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
	
	</select>
	
	
	
	
	<select id="getmost_pcday" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
	
		  SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_pc
		  WHERE STATISTIC_OS NOT LIKE '%Mobile%'
          AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 DAY AND SYSDATE()
          GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
		
	</select>
	
	<select id="getmost_mobileday" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
	
		SELECT COUNT(*),STATISTIC_OS FROM NAKSINURI_STATISTICS as most_mobile
		WHERE STATISTIC_OS LIKE '%Mobile%'
     	AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 DAY AND SYSDATE()
    	GROUP BY STATISTIC_OS ORDER BY COUNT(*) DESC LIMIT 1;
		
	</select>
	
	
	<select id="invitlist_week" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		SELECT A.* FROM (SELECT @RNUM:=@RNUM+1 AS RN ,(SELECT COUNT(*) FROM NAKSINURI_STATISTICS WHERE CLIENT_IP IS NOT NULL
		AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 7 DAY AND SYSDATE()
		<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		) AS TOT_CNT,
		B.* FROM NAKSINURI_STATISTICS B, (SELECT @RNUM := 0) R WHERE CLIENT_IP IS NOT NULL AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 7 DAY AND SYSDATE()
			<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		GROUP BY STATISTIC_SN ORDER BY DATE_TIME DESC) A  WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit# 
		
	
	</select>
	
	<select id="invitlist_day" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		SELECT A.* FROM (SELECT @RNUM:=@RNUM+1 AS RN ,(SELECT COUNT(*) FROM NAKSINURI_STATISTICS WHERE CLIENT_IP IS NOT NULL
		AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 DAY AND SYSDATE()
		<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		) AS TOT_CNT,
		B.* FROM NAKSINURI_STATISTICS B, (SELECT @RNUM := 0) R WHERE CLIENT_IP IS NOT NULL AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 DAY AND SYSDATE()
			<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		GROUP BY STATISTIC_SN ORDER BY DATE_TIME DESC) A WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit# 
		
	
	</select>
	
	<select id="invitlist_month" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		SELECT A.* FROM (SELECT @RNUM:=@RNUM+1 AS RN ,(SELECT COUNT(*) FROM NAKSINURI_STATISTICS WHERE CLIENT_IP IS NOT NULL
		AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 MONTH AND SYSDATE()
		<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		) AS TOT_CNT,
		B.* FROM NAKSINURI_STATISTICS B, (SELECT @RNUM := 0) R WHERE CLIENT_IP IS NOT NULL AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 MONTH AND SYSDATE()
			<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		GROUP BY STATISTIC_SN ORDER BY DATE_TIME DESC) A  WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit# 
		
	
	</select>
	
	
	<select id="invitlist_self" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		SELECT A.* FROM (SELECT @RNUM:=@RNUM+1 AS RN ,(SELECT COUNT(*) FROM NAKSINURI_STATISTICS WHERE CLIENT_IP IS NOT NULL
		AND DATE_TIME BETWEEN #start_dt# AND #end_dt#
		<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		) AS TOT_CNT,
		B.* FROM NAKSINURI_STATISTICS B, (SELECT @RNUM := 0) R WHERE CLIENT_IP IS NOT NULL AND DATE_TIME BETWEEN #start_dt# AND #end_dt#
			<isNotEmpty property="searchText"> 	
			  	<isEqual compareValue="client_ip" property="searchType">
					AND CLIENT_IP LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="browser" property="searchType">
					AND STATISTIC_BROWSER LIKE "%$searchText$%"
			  	</isEqual>
				 <isEqual compareValue="statistic_os"  property="searchType">
					AND STATISTIC_OS LIKE "%$searchText$%"
			  	</isEqual>
		    </isNotEmpty> 
		 GROUP BY STATISTIC_SN
		 ORDER BY DATE_TIME DESC) A 
		 WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit#
	
	</select>
	  			
	  			
	 <select id="get_compareviews" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
		<isNotEqual property="hours" compareValue="0">
	 		SELECT
			(SELECT COUNT(*) AS B FROM NAKSINURI_STATISTICS WHERE DATE_TIME BETWEEN SYSDATE() - INTERVAL 2 DAY AND SYSDATE() - INTERVAL 1 DAY)-
			(SELECT (COUNT(*)/#hours#) AS A 
				FROM NAKSINURI_STATISTICS 
				WHERE DATE_TIME BETWEEN 
				SYSDATE()-INTERVAL #hours# DAY AND SYSDATE())AS CNT;
	 	</isNotEqual>
	 	<isNotEmpty property="end_dt">
	 	<![CDATA[
	 		SELECT
			(SELECT COUNT(*) AS B FROM NAKSINURI_STATISTICS WHERE DATE_TIME BETWEEN SYSDATE() - INTERVAL 2 DAY AND SYSDATE() - INTERVAL 1 DAY)-
			(SELECT (COUNT(*)/#date_time#) AS A 
				FROM NAKSINURI_STATISTICS 
				WHERE DATE_TIME BETWEEN 
				#start_dt# and #end_dt#)AS CNT;
				]]>
	 	</isNotEmpty>
	</select>
	
	 <select id="get_compareviews2" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriStatisticVO">
	 	<isNotEqual property="hours" compareValue="0">
	 		SELECT
			(SELECT COUNT(*) AS B FROM NAKSINURI_STATISTICS WHERE BO_TYPE !='main' AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 DAY AND SYSDATE())-
			(SELECT (COUNT(*)/#hours#) AS A 
				FROM NAKSINURI_STATISTICS 
				WHERE BO_TYPE !='main'
				AND DATE_TIME BETWEEN 
				SYSDATE()-INTERVAL #hours# DAY AND SYSDATE())AS CNT;
	 	</isNotEqual>
	 	<isNotEmpty property="end_dt">
	 	<![CDATA[
	 		SELECT
			(SELECT COUNT(*) AS B FROM NAKSINURI_STATISTICS WHERE BO_TYPE !='main' AND DATE_TIME BETWEEN SYSDATE() - INTERVAL 1 DAY AND SYSDATE())-
			(SELECT (COUNT(*)/#date_time#) AS A 
				FROM NAKSINURI_STATISTICS 
				WHERE BO_TYPE !='main'
				AND DATE_TIME BETWEEN 
				#start_dt# and #end_dt#)AS CNT;
				]]>
	 	</isNotEmpty>
		
	</select>
	
	
	<select id="get_ComuList" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT * FROM NAKSINURIBOARD WHERE BO_TYPE='travel' or BO_TYPE='usage' or BO_TYPE='column'
		<isNotEmpty property="searchText">
				BO_SUBJECT LIKE "%$searchText$%"
		</isNotEmpty>
		<isNotEmpty property="searchText" prepend="or">
				BO_CONTENT LIKE "%$searchText$%"
		</isNotEmpty>
	</select>
	
	<select id="get_EduTotal" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='junior' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_EduList" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='junior' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_Colist" resultClass="naksinurifileVO" parameterClass="naksinurifileVO">
		SELECT A.*, B.ORIGNL_FILE_NM, B.FILE_SN FROM 
 		NAKSINURI A LEFT JOIN LETTNFILEDETAIL B ON A.CO_MIMGSRC = B.ATCH_FILE_ID WHERE 
 		CO_NM LIKE "%$searchText$%" OR CO_INFO LIKE "%$searchText$%" AND CO_TRASH = '0'
 		 LIMIT 4
	</select>
	
	<select id="get_CoTotal" resultClass="naksinuriVO">
		SELECT COUNT(*) AS cnt FROM NAKSINURI WHERE 
 		CO_NM LIKE "%$searchText$%" OR CO_INFO LIKE "%$searchText$%" AND CO_TRASH = '0'
	</select>
	
	
	<select id="get_san_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO" >
		
	SELECT A.*, B.ORIGNL_FILE_NM, B.FILE_SN
		FROM  NAKSINURISANUP A LEFT JOIN LETTNFILEDETAIL B ON A.SAN_IMG = B.ATCH_FILE_ID
			  	<isNotEmpty property="san_aag" prepend="and">
				 	SAN_AAG =#san_aag#
				</isNotEmpty>
				<isNotEmpty property="san_zogu" prepend="and">
				 	SAN_ZOGU =#san_zogu#
				</isNotEmpty>
				<isNotEmpty property="san_media" prepend="and">
				 	SAN_MEDIA =#san_media#
				</isNotEmpty>
				<isNotEmpty property="san_sell" prepend="and">
				 	SAN_SELL =#san_sell#
				</isNotEmpty>
				<isNotEmpty property="san_chool" prepend="and">
				 	SAN_CHOOL =#san_chool#
				</isNotEmpty>
			WHERE SAN_NAME LIKE "%$searchText$%"
						OR SAN_BUISNESSMAN LIKE "%$searchText$%" AND SAN_TRASH = '0'
 		 LIMIT 4
		 
		
	</select>		
	
	<select id="get_san_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO">
		SELECT COUNT(*) AS cnt FROM NAKSINURISANUP WHERE 
 		SAN_NAME LIKE "%$searchText$%" OR SAN_BUISNESSMAN LIKE "%$searchText$%" AND SAN_TRASH = '0'
	</select>
	
	<select id="get_ang_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriAnglingVO">
		SELECT COUNT(*) AS cnt FROM NAKSINURIFTVAPI WHERE 
 		TITLE LIKE "%$searchText$%" OR BODY LIKE "%$searchText$%" AND ISDEL = '0'
	</select>
	
	<select id="get_ang_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriAnglingVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriAnglingVO">
		SELECT * FROM NAKSINURIFTVAPI WHERE 
 		TITLE LIKE "%$searchText$%" OR BODY LIKE "%$searchText$%" AND ISDEL= '0'
 		LIMIT 4
	</select>
	
	<select id="get_gosu_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='gosu' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	
	<select id="get_gosu_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='gosu' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_sense_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='sense' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_sense_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='sense' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_binding_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='binding' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_binding_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='binding' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>

	<select id="get_class_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='class' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_class_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='class' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_lab_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_ATCH_FILE = B.ATCH_FILE_ID WHERE 
		BO_TYPE='lab' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_lab_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='lab' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_news_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriNewsVO">
		SELECT COUNT(MID)AS cnt 
		FROM NAKSINURINEWSAPI WHERE 
		TITLE LIKE "%$searchText$%" AND ISDEL = '0'
	</select>
	
	<select id="get_news_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriNewsVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriNewsVO">
		SELECT * 
		FROM NAKSINURINEWSAPI WHERE TITLE LIKE "%$searchText$%" AND ISDEL = '0' LIMIT 4
	</select>
	
	<select id="get_notice_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_ATCH_FILE = B.ATCH_FILE_ID WHERE 
		BO_TYPE='notice' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_notice_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='notice' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_congress_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='congress' AND BO_SUBJECT LIKE "%$searchText$%" AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_congress_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='congress' AND BO_SUBJECT LIKE "%$searchText$%" AND BO_TRASH = '0'
	</select>
	
	
	<select id="get_event_total" resultClass="eventVO">
		SELECT COUNT(evn_no)AS cnt 
		FROM NAKSINURIEVN WHERE 
	    EVN_SUBJECT LIKE "%$searchText$%" AND EVN_TRASH = '0'
	</select>
	
	<select id="get_event_list" resultClass="eventVO" parameterClass="eventVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIEVN A LEFT JOIN LETTNFILEDETAIL B ON A.EVN_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		EVN_SUBJECT LIKE "%$searchText$%" AND EVN_TRASH = '0' LIMIT 4
	</select>
	
	
	<select id="get_campaign_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='campaign' AND BO_SUBJECT LIKE "%$searchText$%" AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_campaign_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='campaign' AND BO_SUBJECT LIKE "%$searchText$%" AND BO_TRASH = '0'
	</select>
	
	<select id="get_plocation_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriGoneVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriGoneVO">
		SELECT *
		FROM NAKSINURIPROHIBINGAONE WHERE X_CATEGORY = '1'
		AND(X_NAME LIKE "%$searchText$%" OR X_RANG LIKE "%$searchText$%") AND X_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_plocation_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriGoneVO">
		SELECT COUNT(*)AS cnt 
		FROM NAKSINURIPROHIBINGAONE WHERE 
		X_CATEGORY = '1' AND(X_NAME LIKE "%$searchText$%" OR X_RANG LIKE "%$searchText$%") AND X_TRASH = '0'
	</select>
	
	<select id="get_llocation_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriGoneVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriGoneVO">
		SELECT *
		FROM NAKSINURIPROHIBINGAONE WHERE X_CATEGORY = '2'
		AND(X_NAME LIKE "%$searchText$%" OR X_RANG LIKE "%$searchText$%") AND X_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_llocation_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriGoneVO">
		SELECT COUNT(*)AS cnt 
		FROM NAKSINURIPROHIBINGAONE WHERE 
		X_CATEGORY = '2' AND(X_NAME LIKE "%$searchText$%" OR X_RANG LIKE "%$searchText$%") AND X_TRASH = '0'
	</select>
	
	<select id="get_policy_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_ATCH_FILE = B.ATCH_FILE_ID WHERE 
		BO_TYPE='policy' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_policy_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='policy' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_qna_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriQnAVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriQnAVO">
		SELECT *
		FROM NAKSINURIQNA
		WHERE QNA_QUES LIKE "%$searchText$%" AND QNA_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_qna_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriQnAVO">
		SELECT COUNT(*)AS cnt 
		FROM NAKSINURIQNA 
		WHERE QNA_QUES LIKE "%$searchText$%" AND QNA_TRASH = '0'
	</select>
	
	<select id="get_travel_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='travel' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_travel_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='travel' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	
	<select id="get_zisik_list" resultClass="naksinurizisikVO" parameterClass="naksinurizisikVO">
		SELECT *
		FROM NAKSINURIZISIKINQUESTION WHERE 
		NURI_Q_SUBJECT LIKE "%$searchText$%" AND NURI_Q_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_zisik_total" resultClass="naksinurizisikVO">
		SELECT COUNT(*)AS cnt 
		FROM NAKSINURIZISIKINQUESTION WHERE 
		NURI_Q_SUBJECT LIKE "%$searchText$%" AND NURI_Q_TRASH = '0'
	</select>
	
	<select id="get_zazu_list" resultClass="naksinurizisikVO" parameterClass="naksinurizisikVO">
		SELECT *
		FROM NAKSINURIZAZUQUEST WHERE 
		ZAZU_QUES LIKE "%$searchText$%" AND ZAZU_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_zazu_total" resultClass="naksinurizisikVO">
		SELECT COUNT(*)AS cnt 
		FROM NAKSINURIZAZUQUEST WHERE 
		ZAZU_QUES LIKE "%$searchText$%" AND ZAZU_TRASH = '0'
	</select>
	
	<select id="get_usage_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='usage' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_usage_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='usage' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="get_column_total" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT COUNT(BO_SN)AS cnt 
		FROM NAKSINURIBOARD WHERE 
		BO_TYPE='column' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0'
	</select>
	
	<select id="get_column_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.BoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM NAKSINURIBOARD A LEFT JOIN LETTNFILEDETAIL B ON A.BO_MAIN_IMG = B.ATCH_FILE_ID WHERE 
		BO_TYPE='column' AND (BO_SUBJECT LIKE "%$searchText$%" OR BO_CONTENT LIKE "%$searchText$%") AND BO_TRASH = '0' LIMIT 4
	</select>
	
	<select id="edu_notice_total" parameterClass="EduCenterBoardVO" resultClass="int">
		SELECT COUNT(BD_SN)
		FROM ALL_BOARD_DATA_TB WHERE 
		BD_ID='board013' AND (BD_TITLE LIKE "%$searchKeyword$%" OR BD_CONT LIKE "%$searchKeyword$%") AND BD_ST = 'Y' AND BD_LOCK_ST = 'N'
	</select>
	<select id="edu_notice_list" parameterClass="EduCenterBoardVO" resultClass="EduCenterBoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN, M.MBR_NCNM, L.LINK_URL
		FROM ALL_BOARD_DATA_TB A 
		LEFT JOIN COMTNFILEDETAIL B ON A.BD_FILE = B.ATCH_FILE_ID 
		LEFT JOIN MBR_TB AS M ON M.MBR_ID = A.BD_MEMBER_ID
		LEFT JOIN ALL_SHARE_LINK_TB AS L ON L.LINK_SID = A.BD_SN
		WHERE 
		BD_ID='board013' AND (BD_TITLE LIKE "%$searchKeyword$%" OR BD_CONT LIKE "%$searchKeyword$%") AND BD_ST = 'Y' AND BD_LOCK_ST = 'N'
		GROUP BY BD_SN
  		ORDER BY BD_RANK ASC,BD_REG_DT DESC 
		LIMIT 4
	</select>
	
	<select id="edu_faq_total" parameterClass="EduCenterBoardVO" resultClass="int">
		SELECT COUNT(BD_SN)
		FROM ALL_BOARD_DATA_TB WHERE 
		BD_ID='board003' AND (BD_TITLE LIKE "%$searchKeyword$%" OR BD_CONT LIKE "%$searchKeyword$%") AND BD_ST = 'Y' AND BD_LOCK_ST = 'N'
	</select>
	<select id="edu_faq_list" parameterClass="EduCenterBoardVO" resultClass="EduCenterBoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN 
		FROM ALL_BOARD_DATA_TB A LEFT JOIN COMTNFILEDETAIL B ON A.BD_FILE = B.ATCH_FILE_ID WHERE 
		BD_ID='board003' AND (BD_TITLE LIKE "%$searchKeyword$%" OR BD_CONT LIKE "%$searchKeyword$%") AND BD_ST = 'Y' AND BD_LOCK_ST = 'N' 
		LIMIT 4
	</select>
	
	<select id="edu_file_total" parameterClass="EduCenterBoardVO" resultClass="int" >
		SELECT COUNT(BD_SN)
		FROM ALL_BOARD_DATA_TB WHERE 
		BD_ID='board015' AND (BD_TITLE LIKE "%$searchKeyword$%" OR BD_CONT LIKE "%$searchKeyword$%") AND BD_ST = 'Y' AND BD_LOCK_ST = 'N'
	</select>
	<select id="edu_file_list" parameterClass="EduCenterBoardVO" resultClass="EduCenterBoardVO">
		SELECT A.*,B.ORIGNL_FILE_NM, B.FILE_SN, M.MBR_NCNM, L.LINK_URL
		FROM ALL_BOARD_DATA_TB A 
		LEFT JOIN COMTNFILEDETAIL B ON A.BD_FILE = B.ATCH_FILE_ID 
		LEFT JOIN MBR_TB AS M ON M.MBR_ID = A.BD_MEMBER_ID
		LEFT JOIN ALL_SHARE_LINK_TB AS L ON L.LINK_SID = A.BD_SN
		WHERE 
		BD_ID='board015' AND (BD_TITLE LIKE "%$searchKeyword$%" OR BD_CONT LIKE "%$searchKeyword$%") AND BD_ST = 'Y' AND BD_LOCK_ST = 'N'
		GROUP BY BD_SN
  		ORDER BY BD_RANK ASC,BD_REG_DT DESC 
		LIMIT 4
	</select>
	
	<insert id="insert_review">
	
	INSERT INTO NAKSINURI_FISHJOBREVIEW
	(	
		REV_TITLE,
		REV_WRITER,
		REV_PHONE,
		REV_PHONE1,
		REV_PHONE2,
		REV_PHONE3,
		REV_EMAIL,
		REV_EMAIL1,
		REV_EMAIL2,
		REV_CONT,
		NAK_ID,
		REV_REGDATE,
		REV_PASS
	) 
	VALUES 
	(
		#rev_title#,
		#rev_writer#,
		#rev_phone#,
		#rev_phone1#,
		#rev_phone2#,
		#rev_phone3#,
		#rev_email#,
		#rev_email1#,
		#rev_email2#,
		#rev_cont#,
		#nak_id#,
		SYSDATE(),
		#rev_pass#
		
	)
	
	</insert>
	
	
	<delete id="delete_review">
		<![CDATA[
		    
		DELETE 
		FROM NAKSINURI_FISHJOBREVIEW
		WHERE REV_SN = #rev_sn#

		]]>
	</delete>

	<select id="get_revpass" resultClass="egovframework.naksinuri_original.let.naksinuri.service.FishjobReviewVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.FishjobReviewVO">
		SELECT * FROM NAKSINURI_FISHJOBREVIEW WHERE REV_SN = #rev_sn#
	</select>
	
	<select id="get_reviewList" resultClass="egovframework.naksinuri_original.let.naksinuri.service.FishjobReviewVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.FishjobReviewVO">
		SELECT * FROM NAKSINURI_FISHJOBREVIEW WHERE NAK_ID = #nak_id# ORDER BY REV_REGDATE DESC
	</select>
	
	<select id="getrev_info" resultClass="egovframework.naksinuri_original.let.naksinuri.service.FishjobReviewVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.FishjobReviewVO">
		SELECT * FROM NAKSINURI_FISHJOBREVIEW WHERE REV_SN = #rev_sn#
	</select>
	
	
	<update id="update_review">
	UPDATE NAKSINURI_FISHJOBREVIEW
	SET	REV_TITLE  = #rev_title#,
		REV_PHONE  = #rev_phone#,
		REV_PHONE1 = #rev_phone1#,
		REV_PHONE2 = #rev_phone2#,
		REV_PHONE3 = #rev_phone3#,
		REV_EMAIL  = #rev_email#,
		REV_EMAIL1 = #rev_email1#,
		REV_EMAIL2 = #rev_email2#,
		REV_PASS   = #rev_pass#,
		REV_CONT   = #rev_cont#,
		NAK_ID     = #nak_id#,
		REV_REGDATE= SYSDATE()
	WHERE REV_SN = #rev_sn#
	</update>
	
	<insert id="insert_report">
		INSERT INTO 
		NAKSINURI_FISHJOBREPORT
		(
		REPORT_WRITER,
		REPORT_SUBJECT,
		REPORT_CONT,
		REPORT_ATCH_FILE,
		REPORT_PHONE1,
		REPORT_PHONE2,
		REPORT_PHONE3,
		REPORT_PHONE,
		REPORT_EMAIL1,
		REPORT_EMAIL2,
		REPORT_EMAIL3,
		REPORT_EMAIL,
		REPORT_DATE,
		CO_NM
		)
		VALUES
		(
		#report_writer#,
		#report_subject#,
		#report_cont#,
		#report_atch_file#,
		#report_phone1#,
		#report_phone2#,
		#report_phone3#,
		#report_phone#,
		#report_email1#,
		#report_email2#,
		#report_email3#,
		#report_email#,
		SYSDATE(),
		#co_nm#
		)
		
	</insert>
	
	<select id="report_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.ReportVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.ReportVO" >
		SELECT A.*
		FROM   (SELECT  @RNUM:=@RNUM+1 AS RN
			  ,(SELECT COUNT(*) 
			  FROM NAKSINURI_FISHJOBREPORT
			  WHERE REPORT_TRASH = '0'

			  <isNotEmpty property="searchText">
			  	<isEqual compareValue="report_subject" property="searchType">
					AND REPORT_SUBJECT LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="report_writer" property="searchType">
					AND REPORT_WRITER LIKE "%$searchText$%"
			  	</isEqual>
			  </isNotEmpty>
			  ) AS TOT_CNT, N.*	,L.ORIGNL_FILE_NM	
				FROM	NAKSINURI_FISHJOBREPORT N LEFT JOIN LETTNFILEDETAIL L ON N.REPORT_ATCH_FILE = L.ATCH_FILE_ID, (SELECT @RNUM := 0) R
				WHERE REPORT_TRASH = '0'
			  <isNotEmpty property="searchText">	
			  	<isEqual compareValue="report_subject" property="searchType">
					AND REPORT_SUBJECT LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="report_writer" property="searchType">
					AND REPORT_WRITER LIKE "%$searchText$%"
			  	</isEqual>
			
		  </isNotEmpty>
		  		GROUP BY report_sn
		  
				ORDER BY report_sn DESC) A

		 WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit#
		
	</select>
	
	<select id="report_trash" resultClass="egovframework.naksinuri_original.let.naksinuri.service.ReportVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.ReportVO" >
		SELECT A.*
		FROM   (SELECT  @RNUM:=@RNUM+1 AS RN
			  ,(SELECT COUNT(*) 
			  FROM NAKSINURI_FISHJOBREPORT
			  WHERE REPORT_TRASH = '1'

			  <isNotEmpty property="searchText">
			  	<isEqual compareValue="report_subject" property="searchType">
					AND REPORT_SUBJECT LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="report_writer" property="searchType">
					AND REPORT_WRITER LIKE "%$searchText$%"
			  	</isEqual>
			  </isNotEmpty>
			  ) AS TOT_CNT, N.*	,L.ORIGNL_FILE_NM	
				FROM	NAKSINURI_FISHJOBREPORT N LEFT JOIN LETTNFILEDETAIL L ON N.REPORT_ATCH_FILE = L.ATCH_FILE_ID, (SELECT @RNUM := 0) R
				WHERE REPORT_TRASH = '1'
			  <isNotEmpty property="searchText">	
			  	<isEqual compareValue="report_subject" property="searchType">
					AND REPORT_SUBJECT LIKE "%$searchText$%"
			  	</isEqual>
			  	<isEqual compareValue="report_writer" property="searchType">
					AND REPORT_WRITER LIKE "%$searchText$%"
			  	</isEqual>
			
		  </isNotEmpty>
		  		GROUP BY report_sn
		  
				ORDER BY report_sn DESC) A

		 WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit#
		
	</select>
	
	<select id="report_file" resultClass="egovframework.naksinuri_original.let.naksinuri.service.ReportVO">
		<![CDATA[
		SELECT  REPORT_SN, REPORT_ATCH_FILE, FILE_SN,FILE_EXTSN, STRE_FILE_NM, ORIGNL_FILE_NM, FILE_SIZE, FILE_STRE_COURS
		FROM	NAKSINURI_FISHJOBREPORT A ,LETTNFILEDETAIL B
		WHERE REPORT_SN = #report_sn#
		AND A.REPORT_ATCH_FILE = B.ATCH_FILE_ID
		]]>
	</select>
	
	
	<select id="report_findCorp" resultClass="egovframework.naksinuri_original.let.naksinuri.service.ReportVO">
		<![CDATA[
		SELECT  *
		FROM NAKSINURI_FISHJOBREPORT 
		WHERE REPORT_SN = #report_sn#;
		]]>
	</select>
	
	<select id="getListNaksinuri_admin_preview_fish_list" resultClass="naksinuriVO" parameterClass="naksinuriVO">
		SELECT * FROM NAKSINURI_PREVIEW WHERE PREG_STAT = 'r' order by nak_id desc
	</select>	
	<select id="getListNaksinuri_admin_preview_fish_detail" resultClass="naksinuriVO" parameterClass="naksinuriVO">
		SELECT * FROM NAKSINURI_PREVIEW WHERE PREG_STAT = 'r' and nak_id=#nak_id# order by nak_id desc
	</select>	
	<select id="getListNaksinuri_admin_fish_detail" resultClass="naksinuriVO" parameterClass="naksinuriVO">
		SELECT * FROM NAKSINURI WHERE nak_id=#nak_id#
	</select>	
	<select id="getListNaksinuri_admin_preview_ind_list" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO">
		SELECT * FROM NAKSINURISANUP_PREVIEW WHERE PREG_STAT = 'r' order by san_sn desc
	</select>	
	<select id="getListNaksinuri_admin_preview_ind_detail" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO">
		SELECT * FROM NAKSINURISANUP_PREVIEW WHERE PREG_STAT = 'r' and san_sn=#san_sn# order by san_sn desc
	</select>
	<select id="getListNaksinuri_admin_ind_detail" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO">
		SELECT * FROM NAKSINURISANUP WHERE san_sn=#san_sn#
	</select>
	<select id="admin_preview_fishm_img" resultClass="naksinuriVO" parameterClass="naksinuriVO">
		SELECT * FROM LETTNFILEDETAIL WHERE ATCH_FILE_ID=#co_mimgsrc# 
	</select>
	<select id="admin_preview_indm_img" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriSanupVO">
		SELECT * FROM LETTNFILEDETAIL WHERE ATCH_FILE_ID=#san_img# 
	</select>
	
	<insert id="fishInsertPreview"> 
		INSERT INTO NAKSINURI_FILES_PREVIEW
		(
			OID,
			PID,
			PTYPE,
			WSESS,
			P_ATCH_FILE_ID,
			P_FILE_SN,
			P_FILE_STRE_COURS,
			P_STRE_FILE_NM,
			P_ORIGNL_FILE_NM,
			P_FILE_EXTSN,
			P_FILE_CN,
			P_FILE_SIZE,
			P_FILE_HIT
		)
		VALUES
		(
			#oid#,
			#pid#,
			#ptype#,
			#wsess#,
			#atch_file_id#,
			#file_sn#,
			#file_stre_cours#,
			#stre_file_nm#,
			#orignl_file_nm#,
			#file_extsn#,
			#file_cn#,
			#file_size#,
			#file_hit#
		)
	</insert>
	<delete id="deletefishDataPreview">
		<![CDATA[
		DELETE 
		FROM NAKSINURI_PREVIEW
		WHERE PREG_PID = #onak_id# and PREG_STAT = 'w' and NAK_ID < #nak_id#;
		]]>
	</delete>
	<delete id="deletefishFilePreview">
		<![CDATA[
		DELETE 
		FROM NAKSINURI_FILES_PREVIEW
		WHERE OID = #onak_id#  and STAT = 'w';
		]]>
	</delete>
	<insert id="indInsertPreview"> 
		INSERT INTO NAKSINURI_FILES_PREVIEW
		(
			OID,
			PID,
			PTYPE,
			WSESS,
			P_ATCH_FILE_ID,
			P_FILE_SN,
			P_FILE_STRE_COURS,
			P_STRE_FILE_NM,
			P_ORIGNL_FILE_NM,
			P_FILE_EXTSN,
			P_FILE_CN,
			P_FILE_SIZE,
			P_FILE_HIT
		)
		VALUES
		(
			#oid#,
			#pid#,
			#ptype#,
			#wsess#,
			#atch_file_id#,
			#file_sn#,
			#file_stre_cours#,
			#stre_file_nm#,
			#orignl_file_nm#,
			#file_extsn#,
			#file_cn#,
			#file_size#,
			#file_hit#
		)
	</insert>
	<delete id="deleteindDataPreview">
		<![CDATA[
		DELETE 
		FROM NAKSINURISANUP_PREVIEW
		WHERE PREG_PID = #osan_sn# and PREG_STAT = 'w' and SAN_SN < #san_sn#;
		]]>
	</delete>
	<delete id="deleteindFilePreview">
		<![CDATA[
		DELETE 
		FROM NAKSINURI_FILES_PREVIEW
		WHERE OID = #osan_sn# and STAT = 'w';
		]]>
	</delete>

	<select id="modify_fish_check" resultClass="naksinuriVO">
		<![CDATA[
			SELECT * FROM NAKSINURI_PREVIEW WHERE preg_pid = #nak_id#  and preg_stat = 'r' order by nak_id desc  limit 1
		]]>	
	</select>	
	<select id="modify_ind_check" resultClass="naksinuriSanupVO">
		<![CDATA[
			SELECT * FROM NAKSINURISANUP_PREVIEW WHERE preg_pid = #san_sn# and preg_stat = 'r' order by san_sn desc limit 1
		]]>	
	</select>		
	
	
	
	
	
	
	
	
	<delete id="delfishpreviewfile">
		<![CDATA[
		DELETE 
		FROM NAKSINURI_FILES_PREVIEW
		WHERE PID= #pid#
		]]>
	</delete>
	<delete id="delindpreviewfile">
		<![CDATA[
		DELETE 
		FROM NAKSINURI_FILES_PREVIEW
		WHERE PID= #pid#
		]]>
	</delete>		
	<update id="delfishpreviewData">
		<![CDATA[
		UPDATE NAKSINURI_PREVIEW SET 
		CO_MIMGSRC = '', ATCH_FILE_ID = '', PREG_STAT = 'a', PREG_DATE = SYSDATE() 
		WHERE PREG_PID = #oid# and PREG_STAT = 'r';
		]]>
	</update>
	<update id="delindpreviewData">
		<![CDATA[
		UPDATE NAKSINURISANUP_PREVIEW SET 
		SAN_IMG = '', SAN_SIMG = '', PREG_STAT = 'a', PREG_DATE = SYSDATE() 
		WHERE PREG_PID = #oid# and PREG_STAT = 'r';
		]]>
	</update>	
	
	<delete id="deleteindPreview">
		<![CDATA[
		DELETE 
		FROM NAKSINURISANUP_PREVIEW
		WHERE PREG_PID = #osan_sn# and SAN_SN = #san_sn#;
		]]>
	</delete>
		
	<insert id="fishPreviewSaveI">
	<![CDATA[
	INSERT INTO NAKSINURI
	(	
			FISHING_TYPE,
			CO_NM,
			CO_SHIP_NUM1,
			CO_SHIP_NUM2,
			CO_INFO,
			CEO_NM,
			CO_PHONE,
			CO_PHONE1,
			CO_PHONE2,
			CO_PHONE3,
			CO_HPHONE,
			CO_HPHONE1,
			CO_HPHONE2,
			CO_HPHONE3,
			CO_2HPHONE,
			CO_2HPHONE1,
			CO_2HPHONE2,
			CO_2HPHONE3,
			BO_SIZE,
			BO_SPD,
			BO_PSG,
			CO_WEB,
			CO_ADDR,
			CO_ADDR_1,
			CO_ADDR_2,
			CO_ADDR_3,
			CO_FISH,
			CO_SIDO,
			CO_ADDR2,
			CO_ADDR2_1,
			CO_ADDR2_2,
			CO_ADDR2_3,
			CO_PSG,
			CO_STM,
			CO_ETM,
			CO_PRC,
			CO_PRCTP,
			CO_FCT,
			CO_INTRO,
			CO_MIMGSRC,
			ATCH_FILE_ID,
			REG_DATE,
			CO_CREDIT,
			CO_STATUS) 
	VALUES (
			#fishing_type#,
			#co_nm#,
			#co_ship_num1#,
			#co_ship_num2#,
			#co_info#,
			#ceo_nm#,
			#co_phone#,
			#co_phone1#,
			#co_phone2#,
			#co_phone3#,
			#co_hphone#,
			#co_hphone1#,
			#co_hphone2#,
			#co_hphone3#,
			#co_2hphone#,
			#co_2hphone1#,
			#co_2hphone2#,
			#co_2hphone3#,
			#bo_size#,
			#bo_spd#,
			#bo_psg#,
			#co_web#,
			#co_addr#,
			#co_addr_1#,
			#co_addr_2#,
			#co_addr_3#,
			#co_fish#,
			#co_sido#,
			#co_addr2#,
			#co_addr2_1#,
			#co_addr2_2#,
			#co_addr2_3#,
			#co_psg#,
			#co_stm#,
			#co_etm#,
			#co_prc#,
			#co_prctp#,
			#co_fct#,
			#co_intro#,
			#co_mimgsrc#,
			#atch_file_id#,			
			SYSDATE(),
			#co_credit#,
			'y')
		]]>
	</insert>
	<insert id="indPreviewSaveI" >
	<![CDATA[
	INSERT INTO NAKSINURISANUP
		(	
			SAN_DIVSION
			,SAN_AAG
			,SAN_ZOGU
			,SAN_MEDIA
			,SAN_SELL
			,SAN_CHOOL
			,SAN_INPROV
			,SAN_BUISNESSMAN
			,SAN_NAME
			,SAN_TEL
			,SAN_TEL1
			,SAN_TEL2
			,SAN_TEL3
			,SAN_CONTENT
			,SAN_IMG
			,SAN_SIMG
			,SAN_ADDRESS
			,SAN_ADDRESS1
			,SAN_ADDRESS2
			,SAN_ADDRESS3
			,SAN_ITEM
			,SAN_PHONE
			,SAN_PHONE1
			,SAN_PHONE2
			,SAN_PHONE3
			,SAN_HOMEPAGE
			,SAN_DATE
			,SAN_STATUS
			) 
	VALUES (
			
			#san_divsion#
			,#san_aag#
			,#san_zogu#
			,#san_media#
			,#san_sell#
			,#san_chool#
			,#san_inprov#
			,#san_buisnessman#
			,#san_name#
			,#san_tel#
			,#san_tel1#
			,#san_tel2#
			,#san_tel3#
			,#san_content#
			,#san_img#
			,#san_simg#
			,#san_address#
			,#san_address1#
			,#san_address2#
			,#san_address3#
			,#san_item#
			,#san_phone#
			,#san_phone1#
			,#san_phone2#
			,#san_phone3#
			,#san_homepage#
			,SYSDATE()
			,'y'
			)
		]]>
	</insert>
	<update id="fishPreviewSave">
            UPDATE NAKSINURI 
            SET CO_NM      =   #co_nm#,
            	CO_SHIP_NUM1 = #co_ship_num1#,          
            	CO_SHIP_NUM2 = #co_ship_num2#,          
				CO_INFO    =   #co_info#,        	
				CEO_NM     =   #ceo_nm#,         	
				CO_PHONE   =   #co_phone#,       	
				CO_PHONE1  =   #co_phone1#,      	
				CO_PHONE2  =   #co_phone2#,      	
				CO_PHONE3  =   #co_phone3#,      	
				CO_HPHONE  =   #co_hphone#,      	
				CO_HPHONE1 =   #co_hphone1#,     	
				CO_HPHONE2 =   #co_hphone2#,     	
				CO_HPHONE3 =   #co_hphone3#,
				CO_2HPHONE  =   #co_2hphone#,      	
				CO_2HPHONE1 =   #co_2hphone1#,     	
				CO_2HPHONE2 =   #co_2hphone2#,     	
				CO_2HPHONE3 =   #co_2hphone3#,				     	
				BO_SIZE    =   #bo_size#,        	
				BO_SPD     =   #bo_spd#,         	
				BO_PSG     =   #bo_psg#,         	
				CO_WEB     =   #co_web#,         	
				CO_ADDR    =   #co_addr#,        	
				CO_ADDR_1  =   #co_addr_1#,      	
				CO_ADDR_2  =   #co_addr_2#,      	
				CO_ADDR_3  =   #co_addr_3#,      	
				CO_FISH    =   #co_fish#,  
				CO_SIDO	   =   #co_sido#,      	
				CO_ADDR2   =   #co_addr2#,       	
				CO_ADDR2_1 =   #co_addr2_1#,     	
				CO_ADDR2_2 =   #co_addr2_2#,     	
				CO_ADDR2_3 =   #co_addr2_3#,     	
				CO_PSG     =   #co_psg#,         	
				CO_STM     =   #co_stm#,         
				CO_ETM     =   #co_etm#,         
				CO_PRC     =   #co_prc#,         
				CO_PRCTP   =   #co_prctp#,       
				CO_FCT     =   #co_fct#,         	
				CO_INTRO   =   #co_intro#,    

			  <isNotEmpty property="co_mimgsrc">
		  		CO_MIMGSRC = #co_mimgsrc#,
		  	  </isNotEmpty>
			  <isNotEmpty property="co_mimgsrc">
		  		ATCH_FILE_ID = #atch_file_id#,
		  	  </isNotEmpty>
		  	  
				UPD_DATE   =   SYSDATE(),
				CO_CREDIT  =   #co_credit#,  
				CO_STATUS  =   'y'                        	
            WHERE NAK_ID   =   #preg_pid#			
    </update>	
	<update id="indPreviewSave">
			UPDATE NAKSINURISANUP
			SET  SAN_AAG 		 = #san_aag#
				,SAN_ZOGU        = #san_zogu#
				,SAN_MEDIA       = #san_media#
				,SAN_SELL        = #san_sell#
				,SAN_CHOOL       = #san_chool#
				,SAN_INPROV      = #san_inprov#
				,SAN_BUISNESSMAN = #san_buisnessman#
				,SAN_NAME        = #san_name#
				,SAN_TEL         = #san_tel#
				,SAN_TEL1        = #san_tel1#
				,SAN_TEL2        = #san_tel2#
				,SAN_TEL3        = #san_tel3#
				,SAN_CONTENT     = #san_content#
			  
			  <isNotEmpty property="san_img">
		  		,SAN_IMG = #san_img#
		  	  </isNotEmpty>
			  <isNotEmpty property="san_simg">
		  		,SAN_SIMG = #san_simg#
		  	  </isNotEmpty>		  	  				
				,SAN_ADDRESS     = #san_address#
				,SAN_ADDRESS1    = #san_address1#
				,SAN_ADDRESS2    = #san_address2#
				,SAN_ADDRESS3    = #san_address3#
				,SAN_ITEM        = #san_item#
				,SAN_PHONE       = #san_phone#
				,SAN_PHONE1      = #san_phone1#
				,SAN_PHONE2      = #san_phone2#
				,SAN_PHONE3      = #san_phone3#
				,SAN_HOMEPAGE    = #san_homepage#
				,SAN_STATUS 	 = #san_status#
				,SAN_UPDATE      = SYSDATE()
			WHERE SAN_SN 		 = #preg_pid#	
	</update>	
	<insert id="fishfileOrgSave">
	<![CDATA[
		INSERT INTO LETTNFILEDETAIL
		(
			ATCH_FILE_ID,
			FILE_SN,
			FILE_STRE_COURS,
			STRE_FILE_NM,
			ORIGNL_FILE_NM,
			FILE_EXTSN,
			FILE_CN,
			FILE_SIZE,
			FILE_HIT
		)
		VALUES
		(
			#atch_file_id#,
			#file_sn#,
			#file_stre_cours#,
			#stre_file_nm#,
			#orignl_file_nm#,
			#file_extsn#,
			#file_cn#,
			#file_size#,
			#file_hit#
		)
		]]>
	</insert>
	<insert id="indfileOrgSave">
	<![CDATA[
		INSERT INTO LETTNFILEDETAIL
		(
			ATCH_FILE_ID,
			FILE_SN,
			FILE_STRE_COURS,
			STRE_FILE_NM,
			ORIGNL_FILE_NM,
			FILE_EXTSN,
			FILE_CN,
			FILE_SIZE,
			FILE_HIT
		)
		VALUES
		(
			#atch_file_id#,
			#file_sn#,
			#file_stre_cours#,
			#stre_file_nm#,
			#orignl_file_nm#,
			#file_extsn#,
			#file_cn#,
			#file_size#,
			#file_hit#
		)
		]]>
	</insert>	
	<delete id="fishfileOrgdelete">
	<![CDATA[
		DELETE from LETTNFILEDETAIL
		where atch_file_id = #atch_file_id#
		]]>
	</delete>
	<delete id="indfileOrgdelete">
	<![CDATA[
		DELETE from LETTNFILEDETAIL
		where atch_file_id = #san_simg#
		]]>
	</delete>
	
	
	<delete id="delpreview_ind_file">
	<![CDATA[
		DELETE from NAKSINURI_FILES_PREVIEW
		where PID = #san_sn# and PTYPE='B'
		]]>
	</delete>
	<delete id="delpreview_ind_data">
	<![CDATA[
		DELETE from NAKSINURISANUP_PREVIEW
		where san_sn = #san_sn#
		]]>
	</delete>
	
	<delete id="delpreview_fish_file">
	<![CDATA[
		DELETE from NAKSINURI_FILES_PREVIEW
		where PID = #nak_id# and PTYPE='A'
		]]>
	</delete>
	<delete id="delpreview_fish_data">
	<![CDATA[
		DELETE from NAKSINURI_PREVIEW
		where nak_id = #nak_id#
		]]>
	</delete>
	
	<select id="preview_fish_list" resultClass="naksinuriVO">
		<![CDATA[
			SELECT * FROM NAKSINURI_PREVIEW WHERE preg_pid = #nak_id#  and preg_stat = 'a' order by nak_id desc
		]]>	
	</select>	
	<select id="preview_ind_list" resultClass="naksinuriSanupVO">
		<![CDATA[
			SELECT * FROM NAKSINURISANUP_PREVIEW WHERE preg_pid = #san_sn# and preg_stat = 'a' order by san_sn desc
		]]>	
	</select>		
	
	
	<select id="logs_list" parameterClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriLogsVO" resultClass="egovframework.naksinuri_original.let.naksinuri.service.NaksinuriLogsVO">
		SELECT 
		  A.* 
		FROM
		  (SELECT 
		    @RNUM := @RNUM + 1 AS RN,
		    (SELECT 
		      COUNT(*) 
		    FROM
		      NAKSINURI_LOGS
		      <dynamic prepend="WHERE">
			    	<isNotNull prepend="AND" property="searchText">		    	
						( USER_ID LIKE "%$searchText$%" OR ACTIONS LIKE "%$searchText$%" ) 
					</isNotNull>	
					<isNotNull prepend="AND" property="date_from">
						SUBSTRING(REG_DATE,1,10) >= "$date_from$"				
					</isNotNull>
					<isNotNull prepend="AND" property="date_to">
						"$date_to$" >= SUBSTRING(REG_DATE,1,10)
					</isNotNull>
				</dynamic>
			  	) AS TOT_CNT,
		    N.* 
		  FROM
		    NAKSINURI_LOGS AS N 
		 	
		 	, (SELECT @RNUM := 0) R
		 	<dynamic prepend="WHERE">
			    	<isNotNull prepend="AND" property="searchText">		    	
						( USER_ID LIKE "%$searchText$%" OR ACTIONS LIKE "%$searchText$%" ) 
					</isNotNull>	
					<isNotNull prepend="AND" property="date_from">
						SUBSTRING(REG_DATE,1,10) >= "$date_from$"				
					</isNotNull>
					<isNotNull prepend="AND" property="date_to">
						"$date_to$" >= SUBSTRING(REG_DATE,1,10)
					</isNotNull>
				</dynamic>
				ORDER BY REG_DATE DESC
			) A
			
			
		 	WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit#
		 	
			
	</select>
	
	<delete id="logs_delete">
		DELETE from NAKSINURI_LOGS
		where IDX = #idx#
	</delete>
	
	<insert id="logs_insert">
		INSERT INTO NAKSINURI_LOGS
		(
			REG_DATE,
			CONN_IP,
			USER_ID,
			ACTIONS
		)
		VALUES
		(
			NOW(),
			#conn_ip#,
			#user_id#,
			#actions#
		)
	</insert>	
	
	<select id="select_voc_list" resultClass="NaksinuriPolicyVO">
		SELECT A.*
		  FROM (SELECT @RNUM:=@RNUM+1 AS RN, 
		  				(SELECT COUNT(*)
		  				   FROM NAKSINURIVOICEOFCUSTOMER
		  				  WHERE 1=1
		  				  	AND VOC_TRASH = '0'
		  				  	<isNotEmpty property="searchText">
							  	<isEqual compareValue="voc_subject" property="searchType">
									AND VOC_SUBJECT LIKE "%$searchText$%"
							  	</isEqual>
							  	<isEqual compareValue="voc_name" property="searchType">
									AND VOC_NAME LIKE "%$searchText$%"
							  	</isEqual>
								<isEqual compareValue="voc_content" property="searchType">
									AND VOC_CONTENT LIKE "%$searchText$%"
							  	</isEqual>
							</isNotEmpty>
							) AS TOT_CNT, N.*, L.ORIGNL_FILE_NM
				  FROM NAKSINURIVOICEOFCUSTOMER N LEFT JOIN LETTNFILEDETAIL L ON N.VOC_ATCH_FILE = L.ATCH_FILE_ID,
				  (SELECT @RNUM := 0) R
					WHERE 1=1
					  AND VOC_TRASH='0'
					  <isNotEmpty property="searchText">
						  	<isEqual compareValue="voc_subject" property="searchType">
								AND VOC_SUBJECT LIKE "%$searchText$%"
						  	</isEqual>
						  	<isEqual compareValue="voc_name" property="searchType">
								AND VOC_NAME LIKE "%$searchText$%"
						  	</isEqual>
							<isEqual compareValue="voc_content" property="searchType">
								AND VOC_CONTENT LIKE "%$searchText$%"
						  	</isEqual>
						</isNotEmpty>
					GROUP BY VOC_NO
					ORDER BY VOC_NO DESC) A
		WHERE RN BETWEEN (#pageIndex#-1)*#pageUnit#+1 AND #pageIndex# * #pageUnit#
	</select>		
	<select id="select_voc_view" resultClass="NaksinuriPolicyVO" parameterClass="NaksinuriPolicyVO">
		SELECT *
		  FROM NAKSINURIVOICEOFCUSTOMER
		 WHERE 1=1
		   AND VOC_NO = #voc_no#
		  
	</select>		



</sqlMap>
